!function(t){var e=function(t){this.messages={defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",urlstrict:"This value should be a valid url.",number:"This value should be a valid number.",digits:"This value should be digits.",dateIso:"This value should be a valid date (YYYY-MM-DD).",alphanum:"This value should be alphanumeric.",phone:"This value should be a valid phone number."},notnull:"This value should not be null.",notblank:"This value should not be blank.",required:"This value is required.",regexp:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",rangelength:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",rangecheck:"You must select between %s and %s choices.",equalto:"This value should be the same."},this.init(t)};e.prototype={constructor:e,validators:{notnull:function(t){return 0<t.length},notblank:function(t){return"string"==typeof t&&""!==t.replace(/^\s+/g,"").replace(/\s+$/g,"")},required:function(t){if("object"==typeof t){for(var e in t)if(this.required(t[e]))return!0;return!1}return this.notnull(t)&&this.notblank(t)},type:function(t,e){var n;switch(e){case"number":n=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":n=/^\d+$/;break;case"alphanum":n=/^\w+$/;break;case"email":n=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))){2,6}$/i;break;case"url":t=/(https?|s?ftp|git)/i.test(t)?t:"http://"+t;case"urlstrict":n=/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;break;case"dateIso":n=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;case"phone":n=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;break;default:return!1}return""!==t?n.test(t):!1},regexp:function(t,e,n){return RegExp(e,n.options.regexpFlag||"").test(t)},minlength:function(t,e){return t.length>=e},maxlength:function(t,e){return t.length<=e},rangelength:function(t,e){return this.minlength(t,e[0])&&this.maxlength(t,e[1])},min:function(t,e){return Number(t)>=e},max:function(t,e){return Number(t)<=e},range:function(t,e){return t>=e[0]&&t<=e[1]},equalto:function(e,n,i){return i.options.validateIfUnchanged=!0,e===t(n).val()},remote:function(e,n,i){var o={},s={};o[i.$element.attr("name")]=e,"undefined"!=typeof i.options.remoteDatatype&&(s={dataType:i.options.remoteDatatype});var r=function(e,n){"undefined"!=typeof n&&"undefined"!=typeof i.Validator.messages.remote&&n!==i.Validator.messages.remote&&t(i.ulError+" .remote").remove(),i.updtConstraint({name:"remote",valid:e},n),i.manageValidationResult()},a=function(e){if("object"==typeof e)return e;try{e=t.parseJSON(e)}catch(n){}return e},l=function(t){return"object"==typeof t&&null!==t?"undefined"!=typeof t.error?t.error:"undefined"!=typeof t.message?t.message:null:null};return t.ajax(t.extend({},{url:n,data:o,type:i.options.remoteMethod||"GET",success:function(t){t=a(t),r(1===t||!0===t||"object"==typeof t&&null!==t&&"undefined"!=typeof t.success,l(t))},error:function(t){t=a(t),r(!1,l(t))}},s)),null},mincheck:function(t,e){return this.minlength(t,e)},maxcheck:function(t,e){return this.maxlength(t,e)},rangecheck:function(t,e){return this.rangelength(t,e)}},init:function(t){var e=t.validators;t=t.messages;for(var n in e)this.addValidator(n,e[n]);for(n in t)this.addMessage(n,t[n])},formatMesssage:function(t,e){if("object"==typeof e){for(var n in e)t=this.formatMesssage(t,e[n]);return t}return"string"==typeof t?t.replace(/%s/i,e):""},addValidator:function(t,e){this.validators[t]=e},addMessage:function(t,e,n){if("undefined"!=typeof n&&!0===n)this.messages.type[t]=e;else if("type"===t)for(var i in e)this.messages.type[i]=e[i];else this.messages[t]=e}};var n=function(t,n,i){return this.options=n,this.Validator=new e(n),"ParsleyFieldMultiple"===i?this:(this.init(t,i||"ParsleyField"),void 0)};n.prototype={constructor:n,init:function(e,n){this.type=n,this.valid=!0,this.element=e,this.validatedOnce=!1,this.$element=t(e),this.val=this.$element.val(),this.isRequired=!1,this.constraints={},"undefined"==typeof this.isRadioOrCheckbox&&(this.isRadioOrCheckbox=!1,this.hash=this.generateHash(),this.errorClassHandler=this.options.errors.classHandler(e,this.isRadioOrCheckbox)||this.$element),this.ulErrorManagement(),this.bindHtml5Constraints(),this.addConstraints(),this.hasConstraints()&&this.bindValidationEvents()},setParent:function(e){this.$parent=t(e)},getParent:function(){return this.$parent},bindHtml5Constraints:function(){(this.$element.hasClass("required")||this.$element.prop("required"))&&(this.options.required=!0),"undefined"!=typeof this.$element.attr("type")&&RegExp(this.$element.attr("type"),"i").test("email url number range")&&(this.options.type=this.$element.attr("type"),RegExp(this.options.type,"i").test("number range")&&(this.options.type="number","undefined"!=typeof this.$element.attr("min")&&this.$element.attr("min").length&&(this.options.min=this.$element.attr("min")),"undefined"!=typeof this.$element.attr("max")&&this.$element.attr("max").length&&(this.options.max=this.$element.attr("max")))),"string"==typeof this.$element.attr("pattern")&&this.$element.attr("pattern").length&&(this.options.regexp=this.$element.attr("pattern"))},addConstraints:function(){for(var t in this.options){var e={};e[t]=this.options[t],this.addConstraint(e,!0)}},addConstraint:function(t,e){for(var n in t)n=n.toLowerCase(),"function"==typeof this.Validator.validators[n]&&(this.constraints[n]={name:n,requirements:t[n],valid:null},"required"===n&&(this.isRequired=!0),this.addCustomConstraintMessage(n));"undefined"==typeof e&&this.bindValidationEvents()},updateConstraint:function(t,e){for(var n in t)this.updtConstraint({name:n,requirements:t[n],valid:null},e)},updtConstraint:function(e,n){this.constraints[e.name]=t.extend(!0,this.constraints[e.name],e),"string"==typeof n&&(this.Validator.messages[e.name]=n),this.bindValidationEvents()},removeConstraint:function(t){t=t.toLowerCase(),delete this.constraints[t],"required"===t&&(this.isRequired=!1),this.hasConstraints()?this.bindValidationEvents():"ParsleyForm"==typeof this.getParent()?this.getParent().removeItem(this.$element):this.destroy()},addCustomConstraintMessage:function(t){var e=t+("type"===t&&"undefined"!=typeof this.options[t]?this.options[t].charAt(0).toUpperCase()+this.options[t].substr(1):"")+"Message";"undefined"!=typeof this.options[e]&&this.Validator.addMessage("type"===t?this.options[t]:t,this.options[e],"type"===t)},bindValidationEvents:function(){this.valid=null,this.$element.addClass("parsley-validated"),this.$element.off("."+this.type),this.options.remote&&!/change/i.test(this.options.trigger)&&(this.options.trigger=this.options.trigger?" change":"change");var e=(this.options.trigger?this.options.trigger:"")+(/key/i.test(this.options.trigger)?"":" keyup");this.$element.is("select")&&(e+=/change/i.test(e)?"":" change"),e=e.replace(/^\s+/g,"").replace(/\s+$/g,""),this.$element.on((e+" ").split(" ").join("."+this.type+" "),!1,t.proxy(this.eventValidation,this))},generateHash:function(){return"parsley-"+(Math.random()+"").substring(2)},getHash:function(){return this.hash},getVal:function(){return this.$element.data("value")||this.$element.val()},eventValidation:function(t){var e=this.getVal();return"keyup"===t.type&&!/keyup/i.test(this.options.trigger)&&!this.validatedOnce||"change"===t.type&&!/change/i.test(this.options.trigger)&&!this.validatedOnce||!this.isRadioOrCheckbox&&this.getLength(e)<this.options.validationMinlength&&!this.validatedOnce?!0:(this.validate(),void 0)},getLength:function(t){return t&&t.hasOwnProperty("length")?t.length:0},isValid:function(){return this.validate(!1)},hasConstraints:function(){for(var t in this.constraints)return!0;return!1},validate:function(t){var e=this.getVal(),n=null;return this.hasConstraints()?this.options.listeners.onFieldValidate(this.element,this)||""===e&&!this.isRequired?(this.reset(),null):this.needsValidation(e)?(n=this.applyValidators(),("undefined"!=typeof t?t:this.options.showErrors)&&this.manageValidationResult(),n):this.valid:null},needsValidation:function(t){return!this.options.validateIfUnchanged&&null!==this.valid&&this.val===t&&this.validatedOnce?!1:(this.val=t,this.validatedOnce=!0)},applyValidators:function(){var t,e=null;for(t in this.constraints){var n=this.Validator.validators[this.constraints[t].name](this.val,this.constraints[t].requirements,this);!1===n?(e=!1,this.constraints[t].valid=e,this.options.listeners.onFieldError(this.element,this.constraints,this)):!0===n&&(this.constraints[t].valid=!0,e=!1!==e,!1===this.options.listeners.onFieldSuccess(this.element,this.constraints,this)&&(e=!1))}return e},manageValidationResult:function(){var e,n=null;for(e in this.constraints)!1===this.constraints[e].valid?(this.manageError(this.constraints[e]),n=!1):!0===this.constraints[e].valid&&(this.removeError(this.constraints[e].name),n=!1!==n);return this.valid=n,!0===this.valid?(this.removeErrors(),this.errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass),!0):!1===this.valid?(this.errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass),!1):(this.ulError&&0===t(this.ulError).children().length&&this.removeErrors(),n)},ulErrorManagement:function(){this.ulError="#"+this.hash,this.ulTemplate=t(this.options.errors.errorsWrapper).attr("id",this.hash).addClass("parsley-error-list")},removeError:function(e){e=this.ulError+" ."+e;var n=this;this.options.animate?t(e).fadeOut(this.options.animateDuration,function(){t(this).remove(),n.ulError&&0===t(n.ulError).children().length&&n.removeErrors()}):t(e).remove()},addError:function(e){for(var n in e){var i=t(this.options.errors.errorElem).addClass(n);t(this.ulError).append(this.options.animate?t(i).html(e[n]).hide().fadeIn(this.options.animateDuration):t(i).html(e[n]))}},removeErrors:function(){this.options.animate?t(this.ulError).fadeOut(this.options.animateDuration,function(){t(this).remove()}):t(this.ulError).remove()},reset:function(){this.valid=null,this.removeErrors(),this.validatedOnce=!1,this.errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass);for(var t in this.constraints)this.constraints[t].valid=null;return this},manageError:function(e){if(t(this.ulError).length||this.manageErrorContainer(),!("required"===e.name&&null!==this.getVal()&&0<this.getVal().length||this.isRequired&&"required"!==e.name&&(null===this.getVal()||0===this.getVal().length))){var n=e.name,i=!1!==this.options.errorMessage?"custom-error-message":n,o={};e=!1!==this.options.errorMessage?this.options.errorMessage:"type"===e.name?this.Validator.messages[n][e.requirements]:"undefined"==typeof this.Validator.messages[n]?this.Validator.messages.defaultMessage:this.Validator.formatMesssage(this.Validator.messages[n],e.requirements),t(this.ulError+" ."+i).length||(o[i]=e,this.addError(o))}},manageErrorContainer:function(){var e=this.options.errorContainer||this.options.errors.container(this.element,this.isRadioOrCheckbox),n=this.options.animate?this.ulTemplate.show():this.ulTemplate;"undefined"!=typeof e?t(e).append(n):this.isRadioOrCheckbox?this.$element.parent().after(n):this.$element.after(n)},addListener:function(t){for(var e in t)this.options.listeners[e]=t[e]},destroy:function(){this.$element.removeClass("parsley-validated"),this.reset().$element.off("."+this.type).removeData(this.type)}};var i=function(t,n,i){this.initMultiple(t,n),this.inherit(t,n),this.Validator=new e(n),this.init(t,i||"ParsleyFieldMultiple")};i.prototype={constructor:i,initMultiple:function(e,n){this.element=e,this.$element=t(e),this.group=n.group||!1,this.hash=this.getName(),this.siblings=this.group?'[data-group="'+this.group+'"]':'input[name="'+this.$element.attr("name")+'"]',this.isRadioOrCheckbox=!0,this.isRadio=this.$element.is("input[type=radio]"),this.isCheckbox=this.$element.is("input[type=checkbox]"),this.errorClassHandler=n.errors.classHandler(e,this.isRadioOrCheckbox)||this.$element.parent()},inherit:function(t,e){var i,o=new n(t,e,"ParsleyFieldMultiple");for(i in o)"undefined"==typeof this[i]&&(this[i]=o[i])},getName:function(){if(this.group)return"parsley-"+this.group;if("undefined"==typeof this.$element.attr("name"))throw"A radio / checkbox input must have a data-group attribute or a name to be Parsley validated !";return"parsley-"+this.$element.attr("name").replace(/(:|\.|\[|\])/g,"")},getVal:function(){if(this.isRadio)return t(this.siblings+":checked").val()||"";if(this.isCheckbox){var e=[];return t(this.siblings+":checked").each(function(){e.push(t(this).val())}),e}},bindValidationEvents:function(){this.valid=null,this.$element.addClass("parsley-validated"),this.$element.off("."+this.type);var e=this,n=(this.options.trigger?this.options.trigger:"")+(/change/i.test(this.options.trigger)?"":" change"),n=n.replace(/^\s+/g,"").replace(/\s+$/g,"");t(this.siblings).each(function(){t(this).on(n.split(" ").join("."+e.type+" "),!1,t.proxy(e.eventValidation,e))})}};var o=function(t,e,n){this.init(t,e,n||"parsleyForm")};o.prototype={constructor:o,init:function(e,n,i){this.type=i,this.items=[],this.$element=t(e),this.options=n;var o=this;this.$element.find(n.inputs).each(function(){o.addItem(this)}),this.$element.on("submit."+this.type,!1,t.proxy(this.validate,this))},addListener:function(t){for(var e in t)if(/Field/.test(e))for(var n=0;n<this.items.length;n++)this.items[n].addListener(t);else this.options.listeners[e]=t[e]},addItem:function(e){return t(e).is(this.options.excluded)?!1:(e=t(e).parsley(this.options),e.setParent(this),this.items.push(e),void 0)},removeItem:function(e){e=t(e).parsley();for(var n=0;n<this.items.length;n++)if(this.items[n].hash===e.hash)return this.items[n].destroy(),this.items.splice(n,1),!0;return!1},validate:function(t){var e=!0;this.focusedField=!1;for(var n=0;n<this.items.length;n++)"undefined"!=typeof this.items[n]&&!1===this.items[n].validate()&&(e=!1,!this.focusedField&&"first"===this.options.focus||"last"===this.options.focus)&&(this.focusedField=this.items[n].$element);return this.focusedField&&!e&&this.focusedField.focus(),t=this.options.listeners.onFormSubmit(e,t,this),"undefined"!=typeof t?t:e},isValid:function(){for(var t=0;t<this.items.length;t++)if(!1===this.items[t].isValid())return!1;return!0},removeErrors:function(){for(var t=0;t<this.items.length;t++)this.items[t].parsley("reset")},destroy:function(){for(var t=0;t<this.items.length;t++)this.items[t].destroy();this.$element.off("."+this.type).removeData(this.type)},reset:function(){for(var t=0;t<this.items.length;t++)this.items[t].reset()}},t.fn.parsley=function(e,s){function r(r,l){var c=t(r).data(l);if(!c){switch(l){case"parsleyForm":c=new o(r,a,"parsleyForm");break;case"parsleyField":c=new n(r,a,"parsleyField");break;case"parsleyFieldMultiple":c=new i(r,a,"parsleyFieldMultiple");break;default:return}t(r).data(l,c)}return"string"==typeof e&&"function"==typeof c[e]?(c=c[e](s),"undefined"!=typeof c?c:t(r)):c}var a=t.extend(!0,{},t.fn.parsley.defaults,"undefined"!=typeof window.ParsleyConfig?window.ParsleyConfig:{},e,this.data()),l=null;return t(this).is("form")||!0===t(this).data("bind")?l=r(t(this),"parsleyForm"):t(this).is(a.inputs)&&!t(this).is(a.excluded)&&(l=r(t(this),t(this).is("input[type=radio], input[type=checkbox]")?"parsleyFieldMultiple":"parsleyField")),"function"==typeof s?s():l},t.fn.parsley.Constructor=o,t.fn.parsley.defaults={inputs:"input, textarea, select",excluded:"input[type=hidden], input[type=file], :disabled",trigger:!1,animate:!0,animateDuration:300,focus:"first",validationMinlength:3,successClass:"parsley-success",errorClass:"parsley-error",errorMessage:!1,validators:{},showErrors:!0,messages:{},validateIfUnchanged:!1,errors:{classHandler:function(){},container:function(){},errorsWrapper:"<ul></ul>",errorElem:"<li></li>"},listeners:{onFieldValidate:function(){return!1},onFormSubmit:function(){},onFieldError:function(){},onFieldSuccess:function(){}}},t(window).on("load",function(){t('[data-validate="parsley"]').each(function(){t(this).parsley()})})}(window.jQuery||window.Zepto);